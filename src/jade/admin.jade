include mixins

doctype html
html(ng-app='escapeApp')
	head
		meta(charset='UTF-8')
		meta(name='description', content='A game of escape')
		meta(name='author', content='Moritz Company')
		meta(name='viewport', content='width=device-width, initial-scale=1.0')
		title The Game Escape
		link(rel='shortcut icon', href='favicon.ico')
		link(rel='stylesheet', href='inc/admin.css')
		script(src='inc/angular.js')
	body.admin(ng-cloak, ng-controller='AdminCtrl')
		.container
			header
				h1 The Game Escape - Admin
			.jumbotron.collapse.in.chooseTeamSection
				.pos-rel
					i.fa.fa-close.top-corner.pointer(data-target=".chooseTeamSection" data-toggle="collapse")
				.row.clear-fix
					+col(6)
						select.form-control(ng-model='teamId' ng-options='team.$id as team.name for team in getUnfinishedTeams()')
							option(value='' disabled selected) -- choose team --
						button.btn.btn-primary(ng-click='chooseTeam(teamId)' ng-disabled='formFields.newTeamName' data-target=".chooseTeamSection" data-toggle="collapse") Choose Team
					+col(6)
						form(ng-submit='createTeam()')
							input.form-control(type='text' ng-model='formFields.newTeamName' placeholder='Create New Team')
							button.btn.btn-success(type='submit' ng-disabled='!formFields.newTeamName' data-target=".chooseTeamSection" data-toggle="collapse") Create Team
			form(ng-if='activeTeam' ng-submit='addNewMessage()')
				input.form-control.addMessageInput(type='text' ng-model='formFields.newMessage' placeholder='Send a Message to {{activeTeam.name}}')
				input.form-control(type='submit' ng-disabled='!formFields.newMessage' value='Add Message')
			#performanceGauge(just-gage style="width:33%" value="gauge" min="-0.2" max="0.3" title hide-min-max="true" hide-value="true" gauge-width-scale="2.6" gauge-color="gray")
			.row
				+col(null, 6)(ng-show='activeTeam')
					h3 Team: {{activeTeam.name}}
					h5 Started: {{activeTeam.timerStarted ? moment(activeTeam.timerStarted, 'YYYY-MM-DD HH:mm:ss').format('h:mm a') : "false"}}
					h5 Clues: {{activeTeam.clues}}
					h5 Time Allowed: {{activeTeam.timeAllowed / 60}} minutes
				+col(null, 6).controls
					h3 Controls:
					button.btn.btn-primary.collapse.chooseTeamSection(data-target=".chooseTeamSection" data-toggle="collapse") {{activeTeam ? "Change Teams" : "Choose Team"}}
					button.btn.btn-success(ng-click='restartTimer()' ng-show='activeTeam && !activeTeam.timerStarted') Start Game
					button.btn.btn-warning(ng-click='restartTimer()' ng-show='activeTeam && activeTeam.timerStarted') Restart Timer
					button.btn.btn-danger(ng-click='startLockout()' ng-show='activeTeam && !activeTeam.lockoutStarted') Lockout
					button.btn.btn-info(ng-click='endLockout()' ng-show='activeTeam && activeTeam.lockoutStarted') End Lockout
					button.btn.btn-success(ng-click='finishGame()' ng-show='activeTeam && activeTeam.timerStarted && !activeTeam.finish') Finish
			iframe(src="session.html" width="100%")
		| @@javascriptReplaceFiles
